{"version":3,"sources":["../src/index.ts","../src/tools.ts"],"sourcesContent":["#!/usr/bin/env node\n\nimport { Server } from '@modelcontextprotocol/sdk/server/index.js';\nimport { CallToolRequestSchema, ListToolsRequestSchema } from '@modelcontextprotocol/sdk/types.js';\nimport { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';\nimport relativeTime from 'dayjs/plugin/relativeTime.js';\nimport { CURRENT_TIME, DAYS_IN_MONTH, GET_TIMESTAMP, RELATIVE_TIME } from './tools.js';\nimport dayjs from 'dayjs';\n\ndayjs.extend(relativeTime);\n\nexport const server = new Server({\n  name: 'time-mcp',\n  version: '0.0.1',\n}, {\n  capabilities: {\n    tools: {},\n    logging: {},\n  },\n});\n\nserver.setRequestHandler(ListToolsRequestSchema, async () => {\n  return {\n    tools: [CURRENT_TIME, RELATIVE_TIME, DAYS_IN_MONTH, GET_TIMESTAMP],\n  };\n});\n\nserver.setRequestHandler(CallToolRequestSchema, async (request) => {\n  const { name, arguments: args } = request.params;\n  try {\n    switch (name) {\n      case 'current_time': {\n        if (!checkCurrentTimeArgs(args)) {\n          throw new Error(`Invalid arguments for tool: [${name}]`);\n        }\n\n        const format = args.format;\n        const result = getCurrentTime(format);\n        return {\n          success: true,\n          content: [\n            {\n              type: 'text',\n              text: result,\n            },\n          ],\n        };\n      }\n      case 'relative_time': {\n        if (!checkRelativeTimeArgs(args)) {\n          throw new Error(`Invalid arguments for tool: [${name}]`);\n        }\n\n        const time = args.time;\n        const result = getRelativeTime(time);\n        return {\n          success: true,\n          content: [\n            {\n              type: 'text',\n              text: result,\n            },\n          ],\n        };\n      }\n      case 'days_in_month': {\n        if (!checkDaysInMonthArgs(args)) {\n          throw new Error(`Invalid arguments for tool: [${name}]`);\n        }\n\n        const date = args.date;\n        const result = getDaysInMonth(date);\n        return {\n          success: true,\n          content: [\n            {\n              type: 'text',\n              text: `The number of days in month is ${result}.`,\n            },\n          ],\n        };\n      }\n      case 'get_timestamp': {\n        if (!checkTimestampArgs(args)) {\n          throw new Error(`Invalid arguments for tool: [${name}]`);\n        }\n        const time = args.time;\n        const result = getTimestamp(time);\n        return {\n          success: true,\n          content: [\n            {\n              type: 'text',\n              text: `The timestamp of ${time} is ${result} ms.`,\n            },\n          ],\n        };\n      }\n      default: {\n        throw new Error(`Unknown tool: ${name}`);\n      }\n    }\n  } catch (error: unknown) {\n    const message = error instanceof Error ? error.message : String(error);\n\n    return {\n      success: false,\n      content: [\n        {\n          type: 'text',\n          text: message,\n        },\n      ],\n    };\n  }\n});\n\nfunction getCurrentTime(format: string) {\n  return dayjs().format(format);\n}\n\nfunction getRelativeTime(time: string) {\n  return dayjs(time).fromNow();\n}\n\nfunction getTimestamp(time?: string) {\n  return time ? dayjs(time).valueOf() : dayjs().valueOf();\n}\n\nfunction getDaysInMonth(date: string) {\n  return dayjs(date).daysInMonth();\n}\n\nfunction checkCurrentTimeArgs(args: unknown): args is { format: string } {\n  return (\n    typeof args === 'object' &&\n    args !== null &&\n    'format' in args &&\n    typeof args.format === 'string'\n  );\n}\n\nfunction checkRelativeTimeArgs(args: unknown): args is { time: string } {\n  return (\n    typeof args === 'object' &&\n    args !== null &&\n    'time' in args &&\n    typeof args.time === 'string'\n  );\n}\n\nfunction checkDaysInMonthArgs(args: unknown): args is { date: string } {\n  return (\n    typeof args === 'object' &&\n    args !== null &&\n    'date' in args &&\n    typeof args.date === 'string'\n  );\n}\n\nfunction checkTimestampArgs(args: unknown): args is { time?: string } {\n  return (\n    typeof args === 'object' &&\n    args !== null &&\n    'time' in args &&\n    (typeof args.time === 'string' || args.time === undefined)\n  );\n}\n\nasync function runServer() {\n  try {\n\n    process.stdout.write('Starting Time MCP server...\\n');\n    const transport = new StdioServerTransport();\n    await server.connect(transport);\n\n  } catch (error: unknown) {\n    const message = error instanceof Error ? error.message : String(error);\n    process.stderr.write(`Error starting Time MCP server: ${message}\\n`);\n    process.exit(1);\n  }\n}\n\nrunServer().catch(error => {\n  const errorMessage = error instanceof Error ? error.message : String(error);\n  process.stderr.write(`Error running Time MCP server: ${errorMessage}\\n`);\n  process.exit(1);\n});","import { Tool } from '@modelcontextprotocol/sdk/types.js';\n\nexport const CURRENT_TIME: Tool = {\n  name: 'current_time',\n  description: 'Get the current date and time.',\n  inputSchema: {\n    type: 'object',\n    properties: {\n      format: {\n        type: 'string',\n        description: 'The format of the time, default is empty string',\n        enum: [\n          'h:mm A',\n          'h:mm:ss A',\n          'YYYY-MM-DD HH:mm:ss',\n          'YYYY-MM-DD',\n          'YYYY-MM',\n          'MM/DD/YYYY',\n          'MM/DD/YY',\n          'YYYY/MM/DD',\n          'YYYY/MM',\n        ],\n        default: 'YYYY-MM-DD',\n      },\n    },\n  },\n};\n\nexport const RELATIVE_TIME: Tool = {\n  name: 'relative_time',\n  description: 'Get the relative time from now.',\n  inputSchema: {\n    type: 'object',\n    properties: {\n      time: {\n        type: 'string',\n        description: 'The time to get the relative time from now. Format: YYYY-MM-DD HH:mm:ss',\n      },\n    },\n  },\n};\n\nexport const DAYS_IN_MONTH: Tool = {\n  name: 'days_in_month',\n  description: 'Get the number of days in a month.',\n  inputSchema: {\n    type: 'object',\n    properties: {\n      date: {\n        type: 'string',\n        description: 'The date to get the days in month. Format: YYYY-MM-DD',\n      },\n    },\n  },\n};\n\nexport const GET_TIMESTAMP: Tool = {\n  name: 'get_timestamp',\n  description: 'Get the timestamp of a time.',\n  inputSchema: {\n    type: 'object',\n    properties: {\n      time: {\n        type: 'string',\n        description: 'The time to get the timestamp. Format: YYYY-MM-DD HH:mm:ss',\n        default: undefined,\n      },\n    },\n  },\n};"],"mappings":"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","names":["dayjs","relativeTime"]}